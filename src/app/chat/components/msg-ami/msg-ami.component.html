<section class="discussions" >
    <div class="discussion search">
      <div class="searchbar">
        <i class="fa fa-search" (click)="filtrerAmis($event)" aria-hidden="true"></i>
        <input type="text" placeholder="Rechercher..." (keyup)="filtrerAmis($event)">

      </div>
    </div>
    <div class="discussion" *ngFor="let ami of amisFiltres">
      <div class="photo" style="background-image: url(https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80);">
        <div class="online"></div>
      </div>
      <div class="desc-contact" (click)="selectmi(ami.ami.id)">
        <p class="name"> {{ami.ami.username}}</p>
        <p class="message">{{ last_message ? (last_message.message_type==='Text' ? last_message.content : 'audio' ):  (ami.lastMessage?.message_type==='Text' ? ami.lastMessage?.content : (ami.lastMessage?.message_type==='Audio' ? 'audio' : 'Photot')) }}</p>
      </div>
      <div class="timer">
        <ng-container *ngIf="last_message">
          {{ getTimeDifference(last_message.send_date) }}
        </ng-container>
        <ng-container *ngIf="!last_message && ami.lastMessage">
          {{ getTimeDifference(ami.lastMessage.send_date) }}
        </ng-container>
      </div>
          </div>
  </section>
